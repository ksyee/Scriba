# Git 커밋/PR 메시지 컨벤션

## Git 커밋 메시지 컨벤션 가이드

### 1. 기본 구조

[scope] 제목

- 상세 변경 내용 (Why / How)
- 상세 변경 내용

### 2. Scope 종류 (5가지)

- feat: 새로운 기능 추가
- fix: 버그 수정
- refactor: 기능 변화 없는 구조 개선
- chore: 설정, 패키지 관리, 빌드 업무, 단순 작업
- docs: 문서 수정 (코드 변경 없음)

### 3. 작성 규칙

**[제목 (Subject)]**

- 형식: [scope] 제목 (예: [feat] 로그인 기능 구현)
- 어조: 명령문 형태로 작성 (과거형 '~했음', '~함' 사용 금지)
- 마침표: 문장 끝에 마침표(.) 사용 금지
- 길이: 한글 기준 30~50자 내외 권장
- 내용: "무엇을" 변경했는지 명확하게 기술

**[상세 (Body)]**

- 형식: 하이픈(-)을 사용하여 리스트 형태로 기술
- 내용: "왜(Why)"와 "어떻게(How)"를 중심으로 설명
- 간결성: 핵심 변경 포인트만 요약하여 작성

### 4. 타입별 예시

- [feat] 생산 실적 등록 기능 추가
    - 등록 시 가용 재고 실시간 검증 로직 추가
- [fix] 제조일자 기준 LOT 조회 오류 수정
    - 날짜 포맷 파싱 에러 해결
- [refactor] 창고 이동 로직 서비스 레이어로 분리
    - 컨트롤러 내 비즈니스 로직 이관 및 중복 코드 제거
- [docs] API 명세서 최신화
- [chore] dotenv 의존성 패키지 추가

# PR 메시지 컨벤션

## 📋 요약

PR 메시지는 커밋 메시지들의 집합체입니다. **[scope]**를 유지하여 통일성을 주고, **"무엇을, 왜, 어떻게"**라는 핵심 원칙을 본문에 녹여내는 것이 포인트입니다.

---

## 1. PR 제목 규칙

커밋 컨벤션과 동일한 형식을 사용하되, 해당 PR의 가장 대표적인 작업을 기준으로 작성합니다.

- **형식:** `[scope] 제목`
- **규칙:** 명령문 사용, 마침표 금지, 과거형 지양 (예: `~함` 대신 `~추가`)
- **예시:** `[feat] LOT 병합 시 이력 추적 기능 구현`

---

## 2. PR 본문 템플릿 (Body)

리뷰어가 코드의 맥락을 빠르게 파악할 수 있도록 4단계 구조를 권장합니다.

Markdown

`## 📝 개요
(이번 PR의 핵심 목적을 한 문장으로 기술합니다.)
- 예: 생산 실적 등록 시 재고 부족 문제를 해결하기 위해 검증 로직을 강화합니다.

## 🚀 주요 변경 사항 (What)
(커밋 메시지의 Body 내용을 바탕으로 리스트화합니다.)
- [scope] 상세 변경 내용
- [scope] 상세 변경 내용

## 📌 핵심 변경 포인트 (Why / How)
(리뷰어가 중점적으로 봐야 할 기술적 결정이나 로직의 이유를 설명합니다.)
- **Why:** 기존 방식은 대량 데이터 처리 시 속도가 저하되어 비동기 방식으로 변경했습니다.
- **How:** Caffeine 캐시를 도입하여 빈번한 마스터 데이터 조회를 최적화했습니다.

## 🔗 관련 이슈 및 결과
- 관련 이슈: #이슈번호
- 테스트 결과: (선택 사항 - 스크린샷이나 테스트 로그 첨부)`

---

## 3. Scope별 PR 작성 예시 (MES 프로젝트 기준)

| **구분** | **PR 제목 및 요약 예시** |
| --- | --- |
| **feat** | **[feat] LOT 분할 기능 및 바코드 재발행 로직 추가**
- 분할 수량 검증 및 부모 LOT 상태 업데이트 로직 구현 |
| **fix** | **[fix] 공정 이동 시 설비 매핑 오류 수정**
- 데이터베이스 트랜잭션 격리 수준 조정으로 정합성 문제 해결 |
| **refactor** | **[refactor] 실적 집계 쿼리 성능 개선**
- 레거시 SQL의 중복 Join 제거 및 인덱스 최적화 적용 |
| **chore** | **[chore] Spring Boot 3.x 보안 패치 업데이트**
- 의존성 버전 상향 및 관련 설정 파일 수정 |

---

## 4. 실천 가이드

1. **커밋과 PR의 동기화:** PR 본문의 '주요 변경 사항'은 작성하신 커밋 메시지들의 제목을 그대로 옮겨오는 것만으로도 충분히 훌륭한 요약이 됩니다.
2. **작은 단위의 PR:** 가급적 하나의 PR에는 하나의 `scope`만 담기는 것이 좋습니다. 만약 `feat`와 `refactor`가 섞여 있다면, 가급적 분리하여 올리는 것을 권장합니다.